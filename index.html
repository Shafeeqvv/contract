<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" type="text/css" href="assets/style.css">
<style>
body { font-family: Arial, sans-serif; margin:0; padding:0; }
.page { padding: 8px 16px; font-size:10px; line-height:1.2; position:relative; }
.header, .footer { display:flex; justify-content:space-between; align-items:center; margin-bottom:4px; }
.leftlogos img { margin-right:4px; height:20px; }
.title-area { text-align:center; margin-bottom:4px; }
.title-area h1 { font-size:12px; margin:2px 0; }
.contract-input, .contract-input-inline { font-size:10px; padding:2px; width:100%; box-sizing:border-box; }
.contract-input-inline { width:80px; display:inline-block; }
table { width:100%; border-collapse:collapse; margin:2px 0; }
table td { padding:1px 2px; vertical-align:top; }
.arabic { direction:rtl; }
.list-rtl { padding-right:16px; margin:2px 0; }
.signature-canvas { border:1px solid #000; width:200px; height:60px; }
.sig-image { width:200px; height:40px; }
.watermark { position:absolute; top:30%; left:35%; font-size:200px; color:#e5e7eb; opacity:0.2; z-index:0; pointer-events:none; }
.section { margin-bottom:8px; }
@media print {
  body { font-size:9px; }
  .no-print { display:none !important; }
  .page { page-break-inside: avoid; }
  .watermark {
    position:absolute;  /* fixed ensures it prints on page */
    top:30%;
    left:35%;
    z-index:0;
    opacity:0.2;     /* keep light */
    pointer-events:none;
  }
}
</style>
</head>
<body>

<!-- PAGE 1 -->
<div class="page" id="contractPage1">
  <div class="watermark">
    <img src="assets/logo1.png" width="200px;">
  </div>

  <div class="header">
    <div class="toll-free-box">TOLL FREE: 800FIRE</div>
    <div class="title-area">
      <img src="assets/logo1.png" class="title-logo">
      <h1>CENTRAL GAS SUPPLY CONTRACT | عقد توريد الغاز المركزي</h1>
      <p>Contact: +971 4 239 7910</p>
    </div>
    <div class="header-logo-right">
      <img src="assets/Picture.png" class="header-logo">
    </div>
  </div>

  <!-- Enscore Number -->
  <div class="section">
    <strong style="font-size:11px;color:#9d174d">Enscore / رقم العقد</strong>
    <p>
      <input id="enscoreNo" type="number"class="contract-input-inline" placeholder="Enter Enscore No">
      &nbsp; | &nbsp;
      <span class="arabic">الرقم: <span id="enscoreNoArabic">................................</span></span>
    </p>
  </div>

  <!-- English Section -->
  <div class="section" id="englishSection">
    <strong style="font-size:11px;color:#9d174d">Contract Validity & Parties</strong>
    <p>This contract is valid from the date below until the Second Party vacates the flat and a clearance certificate is issued.</p>
    <p><strong>On/</strong> <input id="contractDate" type="date" class="contract-input-inline"></p>
    <p><strong>First Party:</strong> MAF FIRE MIDDLE EAST L.L.C</p>
    <p style="font-size:9px;">P.O. Box: 49895, Al Qusais, Dubai-UAE | TEL: +97142397910</p>
    <p style="font-size:9px;">Email: info@mafgas.ae, www.maffire.com</p>

    <strong style="font-size:11px;color:#9d174d;margin-top:2px;display:block">Second Party Details / Tenant</strong>
    <table style="font-size:9px;">
      <tr><td style="width:28%">Name:</td><td><input id="secondPartyName" class="contract-input"></td></tr>
      <tr><td>Flat/Unit No:</td><td><input id="flatNumber" class="contract-input"></td></tr>
      <tr><td>Building Name:</td><td><input id="buildingName" class="contract-input"></td></tr>
      <tr><td>Contact No:</td><td><input id="contactNo" class="contract-input"></td></tr>
      <tr><td>Email ID:</td><td><input id="emailId" class="contract-input"></td></tr>
      <tr><td>Open Reading:</td><td><input id="openReading" class="contract-input"></td></tr>
    </table>

    <strong style="font-size:11px;color:#9d174d;margin-top:2px;display:block">Subject of Contract</strong>
    <p>Connect the Second Party's flat with the Central Gas system & supply gas.</p>

    <strong style="font-size:11px;color:#9d174d;display:block">Agreements & Terms</strong>
    <ul style="font-size:9px;">
      <li>MAF FIRE MIDDLE EAST L.L.C undertakes to supply continuous gas flow and provide service on request.</li>
      <li>Payment: AED <input id="totalAed" class="contract-input-inline"> divided as below:
        <ul>
          <li>Connection Fee (Cooker): AED <input id="connectionFee" class="contract-input-inline"></li>
          <li>Gas Consumption Deposit (Refundable): AED <input id="depositAmount" class="contract-input-inline"></li>
          <li>Disconnection Fee & Clearance Certificate: AED <input id="disconnectionFee" class="contract-input-inline"></li>
        </ul>
      </li>
      <li>Monthly Service Fee: AED <input id="monthlyFee" class="contract-input-inline"> (around the clock)</li>
      <li>Received: AED <input id="receivedAmount" class="contract-input-inline"> from the Second Party.</li>
      <li>Maintenance Charges: AED <input id="maintenanceCharges" class="contract-input-inline"></li>
      <li>Consumption Invoice: MAF FIRE forwards the consumption invoice periodically, calculating price per cubic meter. Price subject to change by EMARAT.</li>
      <li>Contract as Receipt: This contract is to be treated as an official receipt voucher.</li>
    </ul>
  </div>

  <!-- Arabic Section -->
  <div class="section arabic" id="arabicSection">
    <strong style="font-size:11px;color:#9d174d">مدة العقد والأطراف</strong>
    <p>يبدأ تنفيذ هذا العقد من تاريخه وحتى إخلاء الطرف الثاني للشقة والحصول على براءة ذمة.</p>
    <p><strong>بتاريخ /</strong> <span id="contractDateArabic">................................</span></p>
    <p><strong>الطرف الأول:</strong> شركة ماف فاير ميدل إيست ذ.م.م</p>
    <p style="font-size:9px">ص.ب: 49895، القصيص، دبي - الإمارات | هاتف: 97142397910</p>

    <strong style="font-size:11px;color:#9d174d;margin-top:2px;display:block">تفاصيل الطرف الثاني / المستأجر</strong>
    <table style="font-size:9px;">
      <tr><td style="width:28%">الاسم:</td><td><span id="secondPartyNameArabic">................................</span></td></tr>
      <tr><td>رقم الشقة:</td><td><span id="flatNumberArabic">................................</span></td></tr>
      <tr><td>اسم المبنى:</td><td><span id="buildingNameArabic">................................</span></td></tr>
      <tr><td>رقم الاتصال:</td><td><span id="contactNoArabic">................................</span></td></tr>
      <tr><td>البريد الإلكتروني:</td><td><span id="emailArabic">................................</span></td></tr>
      <tr><td>قراءة الفتح:</td><td><span id="openReadingArabic">................................</span></td></tr>
    </table>

    <strong style="font-size:11px;color:#9d174d;margin-top:2px;display:block">موضوع العقد</strong>
    <p>توصيل الشقة بنظام الغاز المركزي وتزويدها بالغاز.</p>

    <strong style="font-size:11px;color:#9d174d;display:block">الاتفاقات والشروط</strong>
    <ul class="list-rtl" style="font-size:9px;">
      <li>تلتزم شركة ماف فاير ميدل إيست بتزويد الغاز دون انقطاع وتقديم الخدمة عند الطلب.</li>
      <li>المبلغ الإجمالي: درهم <span id="totalAedArabic">................................</span> موزع كالتالي:
        <ul>
          <li>رسوم الربط: درهم <span id="connectionFeeArabic">................................</span></li>
          <li>تأمين الاستهلاك (قابل للاسترداد): درهم <span id="depositAmountArabic">................................</span></li>
          <li>رسوم الفصل وبراءة الذمة: درهم <span id="disconnectionFeeArabic">................................</span></li>
        </ul>
      </li>
      <li>رسوم الخدمة الشهرية: درهم <span id="monthlyFeeArabic">................................</span></li>
      <li>تم استلام: درهم <span id="receivedAmountArabic">................................</span></li>
      <li>رسوم الصيانة: درهم <span id="maintenanceChargesArabic">................................</span></li>
      <li>تُحسب فواتير الاستهلاك حسب سعر إمارات للمتر المكعب.</li>
      <li>يُعتبر هذا العقد سند استلام رسمي.</li>
    </ul>
  </div>

  <!-- Page 1 Signature -->
  <div class="footer" style="margin-top:4px; display:flex; justify-content:space-between; gap:12px; flex-wrap:wrap">
    <div>
      <div style="font-size:10px;font-weight:600">First Party (MAF FIRE)</div>
      <canvas id="firstPartySignatureCanvas1" class="signature-canvas"></canvas>
      <button onclick="clearSignature('firstPartySignatureCanvas1')" class="no-print" style="background:#dc2626;color:#fff;border:0;padding:2px 6px;border-radius:3px;font-size:10px">Clear Signature</button>
    </div>
    <div>
      <div style="font-size:10px;font-weight:600">Second Party / الطرف الثاني</div>
      <canvas id="secondPartySignatureCanvas1" class="signature-canvas"></canvas>
      <button onclick="clearSignature('secondPartySignatureCanvas1')" class="no-print" style="background:#dc2626;color:#fff;border:0;padding:2px 6px;border-radius:3px;font-size:10px">Clear Signature</button>
    </div>
  </div>
</div>

<!-- PAGE 2 TERMS & CONDITIONS (English + Arabic) -->
<div class="page" id="contractPage2">
  <div class="watermark"><img src="assets/logo1.png" width="200px;"></div>
  <div class="header">
    <div class="toll-free-box">TOLL FREE: 800FIRE</div>
    <div class="title-area">
      <img src="assets/logo1.png" class="title-logo">
      <h1>TERMS & CONDITIONS | الشروط والأحكام</h1>
      <p>Contact: +971 4 239 7910</p>
    </div>
    <div class="header-logo-right">
      <img src="assets/Picture.png" class="header-logo">
    </div>
  </div>

  <!-- English T&C -->
  <strong style="font-size:11px;color:#9d174d;display:block;margin-top:2px">TERMS AND CONDITIONS FOR RESIDENTIAL GAS SUPPLY CONTRACT</strong>
  <ol style="font-size:9px; padding-left:16px; margin-top:2px;">
    <li><strong>Customer Documentation:</strong>
      <ul style="list-style: disc;">
        <li>The tenant must provide the EID copy, Passport copy & Tenancy contract copy before LPG connection or activation.</li>
        <li>All required documents must be submitted through the company’s online portal.</li>
      </ul>
    </li>
    <li><strong>Security Deposit & Refund:</strong>
      <ul style="list-style: disc;">
        <li>A refundable security deposit is required prior to LPG connection as per the agreed terms.</li>
        <li>The deposit will be refunded only upon submission of the original contract and Emirates ID copy of the tenant.</li>
        <li>Refund will be given only to the authorized person who signed the contract; ten working days needed for the refund process.</li>
        <li>Refunds will be processed after deduction of any outstanding dues or charges.</li>
        <li>Refund claims must be submitted within six months after contract termination.</li>
      </ul>
    </li>
    <li><strong>Installation & Maintenance:</strong>
      <ul>
        <li>All installation, connection, disconnection, and maintenance service works must be carried out only by MAF FIRE Middle East-approved technicians. The company is not liable for any misuse or unauthorized handling of the system.</li>
        <li>The tenant is responsible for the cost of any services like repair or replacement of spare parts during the contract period.</li>
      </ul>
    </li>
    <li><strong>Gas Leakage or Emergency:</strong>
      <ul style="list-style: disc;">
        <li>In case of any gas leak or system malfunction, the tenant must immediately contact MAF FIRE MIDDLE EAST’s emergency hotline and evacuate the premises if required.</li>
        <li>Turn off the LPG supply using the emergency switch.</li>
        <li>Inform the Building Management and Civil Defense immediately.</li>
        <li>The company will not be responsible for any damage or loss resulting from the tenant’s delay or failure to report a gas leak.</li>
      </ul>
    </li>
    <li><strong>Billing & Charges:</strong>
      <ul>
        <li>LPG consumption will be billed monthly based on the actual meter reading, inclusive of 5% VAT.</li>
        <li>LPG rates are subject to change based on market conditions.</li>
        <li>In addition to consumption charges, a monthly administrative fee shall apply and is compulsory for all active accounts. If unpaid, it will be added to the next month’s bill.</li>
        <li>Tenants must allow access for authorized gas meter readers to take meter readings. Failure to provide access may result in a penalty.</li>
      </ul>
    </li>
    <li><strong>Disconnection and Vacating:</strong>
      <ul style="list-style: disc;">
        <li>Tenants intending to vacate the premises or discontinue service must submit a disconnection request at least ten days in advance.</li>
        <li>A clearance certificate must be obtained from the company upon vacating.</li>
        <li>A disconnection fee will apply and must be settled prior to processing or will be deducted in deposit.</li>
      </ul>
    </li>
    <li><strong>Liability and Compensation:</strong>
      <ul style="list-style: disc;">
        <li>The tenant agrees that the company shall not be required to provide any compensation for damages resulting from the tenant’s actions, misuse, or negligence.</li>
        <li>The tenant further agrees not to make or pursue any claims against the company in respect of such losses or damages.</li>
        <li>If the tenant has home insurance, a copy of the policy should be provided to the company.</li>
      </ul>
    </li>
  </ol>

  <!-- Arabic T&C -->
  <div class="arabic">
    <strong style="font-size:11px;color:#9d174d;display:block;margin-top:2px">الشروط والأحكام لعقد توريد الغاز السكني</strong>
    <ol style="font-size:9px; padding-right:16px; margin-top:2px; list-style-type:decimal;">
      <li><strong>توثيق العميل:</strong>
        <ul style="list-style: disc;">
          <li>يجب على المستأجر تقديم نسخة من بطاقة الهوية الإلكترونية، جواز السفر، وعقد الإيجار قبل توصيل أو تفعيل الغاز.</li>
          <li>يجب تقديم جميع المستندات المطلوبة عبر البوابة الإلكترونية للشركة.</li>
        </ul>
      </li>
      <li><strong>التأمين والاسترداد:</strong>
        <ul style="list-style: disc;">
          <li>مطلوب وديعة تأمين قابلة للاسترداد قبل توصيل الغاز وفقاً للشروط المتفق عليها.</li>
          <li>يتم استرداد التأمين فقط بعد تقديم العقد الأصلي ونسخة من بطاقة الهوية الإماراتية للمستأجر.</li>
          <li>يتم الاسترداد للشخص المخول فقط الذي وقع العقد، وتستغرق العملية عشرة أيام عمل.</li>
          <li>يتم الاسترداد بعد خصم أي مستحقات أو رسوم غير مسددة.</li>
          <li>يجب تقديم طلب استرداد خلال ستة أشهر من إنهاء العقد.</li>
        </ul>
      </li>
      <li><strong>التركيب والصيانة:</strong>
        <ul style="list-style: disc;">
          <li>يجب تنفيذ جميع أعمال التركيب، التوصيل، الفصل والصيانة فقط بواسطة الفنيين المعتمدين من شركة ماف فاير ميدل إيست. الشركة غير مسؤولة عن أي سوء استخدام أو تعامل غير مصرح به مع النظام.</li>
          <li>يتحمل المستأجر تكلفة أي خدمات مثل الإصلاح أو استبدال قطع الغيار خلال فترة العقد.</li>
        </ul>
      </li>
      <li><strong>تسرب الغاز أو الطوارئ:</strong>
        <ul style="list-style: disc;">
          <li>في حالة حدوث أي تسرب للغاز أو خلل في النظام، يجب على المستأجر الاتصال فوراً بالخط الساخن للطوارئ وإخلاء المكان إذا لزم الأمر.</li>
          <li>إيقاف تشغيل الغاز باستخدام مفتاح الطوارئ.</li>
          <li>إبلاغ إدارة المبنى والدفاع المدني فوراً.</li>
          <li>الشركة غير مسؤولة عن أي أضرار أو خسائر تنتج عن تأخير أو فشل المستأجر في الإبلاغ عن تسرب الغاز.</li>
        </ul>
      </li>
      <li><strong>الفواتير والرسوم:</strong>
        <ul style="list-style: disc;">
          <li>يتم إصدار فواتير الغاز شهرياً بناءً على قراءة العداد الفعلية، شاملة ضريبة القيمة المضافة بنسبة 5٪.</li>
          <li>قد تتغير أسعار الغاز بناءً على ظروف السوق.</li>
          <li>تطبق رسوم إدارية شهرية إضافية، وإذا لم تُسدد تُضاف إلى فاتورة الشهر التالي.</li>
          <li>يجب السماح بالوصول لقراء عدادات الغاز المخولين. عدم توفير الوصول قد يؤدي إلى غرامة.</li>
        </ul>
      </li>
      <li><strong>الفصل والإخلاء:</strong>
        <ul style="list-style: disc;">
          <li>يجب على المستأجرين الراغبين في الإخلاء أو فصل الخدمة تقديم طلب الفصل قبل عشرة أيام على الأقل.</li>
          <li>يجب الحصول على شهادة براءة ذمة من الشركة عند الإخلاء.</li>
          <li>تطبق رسوم الفصل ويجب تسويتها قبل المعالجة أو تُخصم من التأمين.</li>
        </ul>
      </li>
      <li><strong>المسؤولية والتعويض:</strong>
        <ul style="list-style: disc;">
          <li>يوافق المستأجر على أن الشركة غير ملزمة بتقديم أي تعويض عن الأضرار الناتجة عن أفعال المستأجر أو سوء الاستخدام أو الإهمال.</li>
          <li>يوافق المستأجر كذلك على عدم تقديم أو متابعة أي مطالبات ضد الشركة بشأن هذه الخسائر أو الأضرار.</li>
          <li>إذا كان لدى المستأجر تأمين منزلي، يجب تقديم نسخة من الوثيقة للشركة.</li>
        </ul>
      </li>
    </ol>
  </div>

  <!-- Page 2 Signature -->
  <div class="footer" style="margin-top:4px; display:flex; justify-content:space-between; gap:12px; flex-wrap:wrap">
    <div>
      <div style="font-size:10px;font-weight:600">First Party (MAF FIRE)</div>
      <canvas id="firstPartySignatureCanvas2" class="signature-canvas"></canvas>
      <button onclick="clearSignature('firstPartySignatureCanvas2')" class="no-print" style="background:#dc2626;color:#fff;border:0;padding:2px 6px;border-radius:3px;font-size:10px">Clear Signature</button>
    </div>
    <div>
      <div style="font-size:10px;font-weight:600">Second Party / الطرف الثاني</div>
      <canvas id="secondPartySignatureCanvas2" class="signature-canvas"></canvas>
      <button onclick="clearSignature('secondPartySignatureCanvas2')" class="no-print" style="background:#dc2626;color:#fff;border:0;padding:2px 6px;border-radius:3px;font-size:10px">Clear Signature</button>
    </div>
  </div>
</div>

<!-- PRINT BUTTON -->
<div style="position:fixed;bottom:8px;left:50%;transform:translateX(-50%);" class="no-print">
  <button onclick="printContract()" style="background:#374151;color:#fff;padding:6px 12px;border-radius:4px;border:0;font-weight:600;font-size:10px">Print Contract</button>
</div>

<script>
// Update Arabic fields
function updateArabicValues() {
  const FILL = '................................';
  const amounts = ['totalAed','connectionFee','depositAmount','disconnectionFee','monthlyFee','receivedAmount','maintenanceCharges'];
  amounts.forEach(k=>{
    const val = document.getElementById(k)?.value || FILL;
    document.getElementById(k + 'Arabic').textContent = val;
  });

  const map = {
    'secondPartyName':'secondPartyNameArabic',
    'flatNumber':'flatNumberArabic',
    'buildingName':'buildingNameArabic',
    'contactNo':'contactNoArabic',
    'emailId':'emailArabic',
    'openReading':'openReadingArabic',
    'enscoreNo':'enscoreNoArabic'
  };
  for(const [en,ar] of Object.entries(map)){
    const val = document.getElementById(en)?.value || FILL;
    document.getElementById(ar).textContent = val;
  }

  const dateVal = document.getElementById('contractDate').value || FILL;
  document.getElementById('contractDateArabic').textContent = dateVal;
}

document.querySelectorAll('input').forEach(inp=>inp.addEventListener('input',updateArabicValues));

function printContract() {
  updateArabicValues();

  const enscoreNo = document.getElementById('enscoreNo').value || 'xxxx';
  document.title = `contract_${enscoreNo}`; // dynamically change page title

  window.print();

  // Optional: restore original title
  setTimeout(() => { document.title = "Central Gas Supply Contract"; }, 1000);
}


// Signature Pad
class SignaturePad {
  constructor(canvas) {
    this.canvas = canvas;
    this.ctx = canvas.getContext('2d');
    this.drawing = false;
    this.lastX = 0; this.lastY = 0;
    this.resizeCanvas();
    this.ctx.lineWidth = 2; this.ctx.lineJoin = 'round'; this.ctx.lineCap = 'round';
    this.ctx.strokeStyle = '#000';
    canvas.addEventListener('mousedown', e => this.startDraw(e));
    canvas.addEventListener('mousemove', e => this.draw(e));
    canvas.addEventListener('mouseup', e => this.endDraw());
    canvas.addEventListener('mouseleave', e => this.endDraw());
    canvas.addEventListener('touchstart', e => this.startDraw(e,true));
    canvas.addEventListener('touchmove', e => this.draw(e,true));
    canvas.addEventListener('touchend', e => this.endDraw());
    canvas.addEventListener('touchcancel', e => this.endDraw());
    canvas.addEventListener('touchstart', e => e.preventDefault(), {passive:false});
    canvas.addEventListener('touchmove', e => e.preventDefault(), {passive:false});
    window.addEventListener('resize', ()=>this.resizeCanvas());
  }
  resizeCanvas() {
    const ratio = Math.max(window.devicePixelRatio||1,1);
    this.canvas.width = this.canvas.offsetWidth*ratio;
    this.canvas.height = this.canvas.offsetHeight*ratio;
    this.ctx.scale(ratio,ratio);
  }
  getPos(e,touch=false){
    const rect=this.canvas.getBoundingClientRect();
    return touch?{x:e.touches[0].clientX-rect.left, y:e.touches[0].clientY-rect.top} : {x:e.clientX-rect.left, y:e.clientY-rect.top};
  }
  startDraw(e,touch=false){ const pos=this.getPos(e,touch); this.drawing=true; this.lastX=pos.x; this.lastY=pos.y; }
  draw(e,touch=false){ if(!this.drawing)return; const pos=this.getPos(e,touch); this.ctx.beginPath(); this.ctx.moveTo(this.lastX,this.lastY); this.ctx.lineTo(pos.x,pos.y); this.ctx.stroke(); this.lastX=pos.x; this.lastY=pos.y; }
  endDraw(){ this.drawing=false; }
  clear(){ this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height); }
}

['firstPartySignatureCanvas1','secondPartySignatureCanvas1','firstPartySignatureCanvas2','secondPartySignatureCanvas2'].forEach(id=>{
  new SignaturePad(document.getElementById(id));
});

function clearSignature(id){ document.getElementById(id).getContext('2d').clearRect(0,0,document.getElementById(id).width,document.getElementById(id).height);}
</script>

</body>
</html>
